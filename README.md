# StingrayTV Alice - управление приёмником Триколора с помощью "Дома с Алисой"

**Проект перешёл в новую стадию - окончательный переход на Keycloak, куча рефакторинга, гораздо меньше вайбкода, и гораздо больше ручных правок. Всё это делает проект гораздо лучше.**

## Описание

Проект предоставляет интеграцию приёмника Триколора через сервис "Дом с Алисой".
Пользователи могут управлять своим приёмником голосом через Алису.

## Быстрый старт

### Процесс авторизации

1. Пользователь нажимает "Привязать к Яндексу" в приложении "Дом с Алисой"
2. Яндекс перенаправляет на страницу авторизации
3. Пользователь соглашается с авторизацией
4. Яндекс обменивает код на JWT токен
5. Токен используется для доступа к API навыка

## Безопасность

Используется Keycloak, с авторизацией клиента через client_id + токен, и с интеграцией со Spring через Spring OAuth2 Resource Server.

## API эндпоинты

### Умный дом Яндекса

- `GET /v1.0/user/devices` - получение списка устройств
- `POST /v1.0/user/devices/query` - запрос состояния устройств
- `POST /v1.0/user/devices/action` - выполнение действий с устройствами
- `POST /v1.0/user/unlink` - оповещение о разъединении аккаунтов

## Технологии

- **Java 21**
- **Spring Boot**
- **Spring Security**
- **Keycloak**
- **Gradle**
- **Docker**

## Лицензия

**GPLv3**
